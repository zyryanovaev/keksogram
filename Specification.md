* Название сайта: **Кекстаграм**.
* Кекстаграм — сервис просмотра изображений. Пользователям предоставлена возможность загружать свои фотографии или просматривать фотографии, загруженные ранее другими пользователями.

---

### Описание функциональности

#### 1\. Загрузка нового изображения на сайт и заполнение информации о нём:

1.1. Загрузка нового изображения:

* выбор файла с изображением для загрузки;
* изменение масштаба изображения;
* применение одного из заранее заготовленных эффектов;
* выбор глубины эффекта с помощью ползунка;
* добавление текстового комментария;
* добавление хэш-тегов.

**Обратите внимание**

В последующих после выбора файла шагах может использоваться тестовое изображение, вставленное в разметку по умолчанию. Подстановка в форму реального изображения, выбранного пользователем необязательна.

1.3. Выбор изображения для загрузки осуществляется с помощью стандартного **контрола загрузки файла `#upload-file`**, который стилизован под букву «О» в логотипе. После выбора изображения (изменения значения поля `#upload-file`), показывается форма редактирования изображения.

1.4. Закрытие формы редактирования изображения производится либо нажатием на кнопку `.upload-cancel`, либо нажатием клавиши Esc.

#### 2\. Редактирование изображения и ограничения, накладываемые на поля

2.1. Масштаб:

При нажатии на кнопки `.resize__control--minus` и `.resize__control--plus` должно изменяться значение поля `.resize__control--value`.

Значение должно изменяться с шагом в 25\. Например, если значение поля установлено в 50%, после нажатия на «+», значение должно стать равным 75%. Максимальное значение — 100%, минимальное — 25%. Значение по умолчанию — 100%.

При изменении значения поля `.resize__control--value` изображению `.img-upload__preview` должен добавляться соответствующий стиль CSS, который с помощью трансформации `scale` задаёт масштаб. Например, если в поле стоит значение 75%, то в стиле изображения должно быть написано `transform: scale(0.75)`.

2.2. Наложение эффекта на изображение:

* На изображение может накладываться только один эффект.
* При смене эффекта, выбором одного из значений среди радиокнопок `.effects__radio`, добавить картинке внутри `.img-upload__preview` CSS-класс, соответствующий эффекту. Например, если выбран эффект `.effect-chrome`, изображению нужно добавить класс `effects__preview--chrome`.
* Интенсивность эффекта регулируется перемещением ползунка в **слайдере `.scale__pin`**. Уровень эффекта записывается в поле `.scale__value`. При изменении уровня интенсивности эффекта, CSS-стили элемента `.img-upload__preview` обновляются следующим образом:

  * Для эффекта «Хром» — `filter: grayscale(0..1);`
  * Для эффекта «Сепия» — `filter: sepia(0..1);`
  * Для эффекта «Марвин» — `filter: invert(0..100%);`
  * Для эффекта «Фобос» — `filter: blur(0..3px);`
  * Для эффекта «Зной» — `filter: brightness(1..3).`

* При выборе эффекта «Оригинал» слайдер скрывается.
* При переключении эффектов, уровень насыщенности сбрасывается до начального значения (100%): слайдер, CSS-стиль изображения и значение поля должны обновляться.

  2.3. Хэш-теги:

* хэш-теги необязательны;
* хэш-тег начинается с символа `#` (решётка);
* хеш-тег не может состоять только из одной решётки;
* хэш-теги разделяются пробелами;
* один и тот же хэш-тег не может быть использован дважды;
* нельзя указать больше пяти хэш-тегов;
* максимальная длина одного хэш-тега 20 символов;
* теги нечувствительны к регистру: #ХэшТег и #хэштег считаются одним и тем же тегом.
* если фокус находится в поле ввода хэш-тега, нажатие на Esc не должно приводить к закрытию формы редактирования изображения.

Сообщения о неправильном формате хэштега задаются с помощью метода `setCustomValidity` у соответствующего поля.

2.4. Комментарий:

* комментарий не обязателен;
* длина комментария не может составлять больше 140 символов;
* если фокус находится в поле ввода комментария, нажатие на Esc не должно приводить к закрытию формы редактирования изображения.

#### 3\. Отправка данных на сервер

3.1. После заполнения всех данных, при нажатии на кнопку «Отправить», все данные из формы, включая изображения, с помощью AJAX-запроса отправляются на сервер [https://js.dump.academy/kekstagram](https://js.dump.academy/kekstagram) методом `POST` с типом `multipart/form-data`.

[3.2.](href#kekstagram-3-2) Страница реагирует на неправильно введённые значения в форму. Если данные, введённые в форму, не соответствуют ограничениям, указанным в пункта [2.) и[2.4 , форму невозможно отправить на сервер. При попытке отправить форму с неправильными данными, отправки не происходит, а неверно заполненные поля подсвечиваются красной рамкой. Способ добавления рамки и её стиль произвольные.

3.3. При успешной отправке формы, форма редактирования изображения закрывается, все данные, введённые в форму и контрол фильтра, приходят в исходное состояние. Поле загрузки фотографии, стилизованное под букву «О» в логотипе, очищается.

3.4. Если при отправке данных произошла ошибка запроса, нужно показать соответствующее сообщение с помощью блока `img-upload__message--error`, у которого нужно убрать класс `hidden`.

3.5. Нажатие на кнопку `#upload-cancel` приводит к закрытию и очистке всех данных, введённых в форму редактирования. Поле загрузки фотографии, стилизованное под букву «О» в логотипе, очищается.

#### 4\. Просмотр загруженных изображений

4.1. Загрузка изображений от других пользователей производится сразу после открытия страницы с удалённого **сервера** через XHR: [https://js.dump.academy/kekstagram/data](https://js.dump.academy/kekstagram/data).

4.2. Все загруженные изображения показаны на главной странице в виде миниатюр. При наведении на миниатюру можно увидеть количество комментариев и лайков. DOM-элемент миниатюры генерируется на основе шаблонного элемента `picture`, расположенного в элементе `template` на странице.

4.3. При нажатии на любую из миниатюр, показывается **блок `.big-picture`**, содержащий полноэкранное изображение с количеством лайков и комментариев. Злементу `body` задаётся класс `modal-open`. Данные, описывающие изображение должны подставляться в соответствующие элементы в разметке.

4.4. Выход из полноэкранного режима просмотра фотографии осуществляется либо нажатием на иконку крестика `.big-picture__cancel` в правом верхнем углу блока `.big-picture`, либо нажатием на клавишу Esc.

4.5. Все комментарии к изображению выводятся в блок `.social__comments`. Сразу после открытия изображения в полноэкранном режиме отображается не более **5** комментариев. Пример разметки списка комментариев приведен в блоке `.social-comments`. Комментарий оформляется отдельным элементом списка `li` с классами `social__comment` и `social__comment--text`. Аватарка автора комментария отображается в блоке `.social__picture`. Текст комментария выводится в элементе `li`.

4.6. Отображение дополнительных комментариев происходит при нажатии на кнопку `.social__loadmore`. При нажатии на кнопку отображается не более **5** новых комментариев.

4.7. Если все комментарии показаны, кнопку `.social__loadmore` следует скрыть, добавив класс `hidden`.

#### 5\. Фильтрация изображений от других пользователей

5.1. Рекомендуемые — фотографии в том порядке, в котором они были загружены с сервера.

5.2. Популярные — фотографии, отсортированные в порядке убывания количества лайков.

5.3. Обсуждаемые — фотографии, отсортированные в порядке убывания количества комментариев.

5.4. Случайные — просто случайные фотографии. Не должны повторяться.

5.5. Блок, с помощью которого производится фильтрация фотографий скрыт изначально и показывается только после окончания загрузки всех фотографий.

5.6. При переключении фильтров, отрисовка изображений, подходящих под новый фильтр, должна производиться не чаще, чем один раз в полсекунды _(устранение дребезга)_.

#### 6\. Доступность и активные элементы

6.1. Взаимодействие со всеми активными элементами на странице должно быть доступно не только с помощью курсора и кликов на них, но и с помощью клавиатуры: все активные элементы должны фокусироваться и реагировать на нажатие клавиши Enter так же, как и на клик.

#### 7\. Необязательная функциональность

7.1. В форме редактирования показывается изображение, добавленное в форму загрузки. По умолчанию все действия по редактированию можно проводить с тестовым изображением, которое заранее вставлено в форму, вставка вместо него изображения, выбранного через поле загрузки необязательна.
